#!/bin/bash
  
# loop through domains in domains.txt, preceding each with http:// and https://
for protocol in 'http://' 'https://' ; do 
    while read line; do
        # get http return code of each domain
        code=$(timeout 5 curl -L --write-out "%{http_code}\n" --output /dev/null --silent "$protocol$line")

        # if $code empty/unset or = 000 (error), else print to terminal and to file
        if [ -z $code ] || [ $code = "000" ]; then 
            echo "$protocol$line: not responding."
        else
            echo "$protocol$line: HTTP $code"
            echo "$protocol$line: $code" >> alive.txt

    done < domains.txt
done 