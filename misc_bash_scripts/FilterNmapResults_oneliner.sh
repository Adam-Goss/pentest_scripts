#!$(which bash)

# filter only open ports, cut to only port numbers, filter to only unique port numbers, 
# use xargs to turn the multiline list into a space-seperated list, 
# replace spaces with commas with tr, and redirect output to a new file

cat nmap_file.txt | grep "open" | grep -v "filtered" | -cut -d "/" -f 1 | sort -u | xargs | tr ' ' ',' > open_ports.txt